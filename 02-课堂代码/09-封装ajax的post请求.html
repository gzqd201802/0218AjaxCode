<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>

        // 封装小结：
        //     其实 ajax 写法都差不多，主要是以下几部分的变化:
        //      1. 请求方式
        //      2. 请求地址
        //      3. 请求参数
        //      4. 回调函数内部的业务代码！！！！！！
        //  封装主要就是考虑以上 4 点。

        // 用户验证 - 验证用户名是否可用
        // 请求地址：https://autumnfish.cn/api/user/check
        // 请求方法：post
        // 请求参数：username

        function post(url, data, fn) {
            // 1. new 创建ajax对象 小黄人对象
            const xhr = new XMLHttpRequest();
            // 2. open 设置 请求的方法 和请求的地址
            xhr.open('post', url);
            // 3. 设置请求头(固定写法)
            xhr.setRequestHeader('content-type', 'application/x-www-form-urlencoded');
            // 4. send 发送请求
            xhr.send(data);
            // 5. onload 注册回调函数
            xhr.onload = function () {
                // console.log(xhr.responseText);
                // 调用函数并传递实参
                fn(xhr.responseText);
            }
        }

        // 调用封装好的 post 请求
        post('https://autumnfish.cn/api/user/check',`username=李四66677`, function(res){
            console.log(res);
        });

        // 重点：
        //   post 和 get 的封装主要区别是：
        //      1. 请求的参数书写的位置不一样
        //      2. post 需要设置请求头

    </script>
</body>

</html>